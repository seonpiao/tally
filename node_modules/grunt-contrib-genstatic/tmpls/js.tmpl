define(["js/common/moduleRunner"<% if(modules.length > 0){ %>,<% } %>
    <% 
        var empty = true; 
        for(var i = 0; i < modules.length; i++){ 
            if(modules[i].jsPath){
                
    %>
                <% if(!empty){ %>,<% } %>
    <% 
                empty = false;
    %>
                "<%= modules[i].jsPath%>" 
    <%
            }
    %>
    <% } %>]
    ,function(ModuleRunner<% if(modules.length > 0){ %>,<% } %>
        <%
            var empty = true;
            for(var i = 0; i < modules.length; i++){
                if(modules[i].jsPath){ 
        %>
        <%if(!empty){%>,<%}%>
        <%empty = false;%>
        <%=modules[i].name%>
        <%
                }
            }
        %>
    ){
        var modules = {
        <%
        var empty = true;
        for(var i = 0; i < modules.length; i++){
            if(modules[i].jsPath){
        %>
        <%if(!empty){%>,<%}%>
        <%empty = false;%>
        <%=modules[i].name%>:<%=modules[i].name%>
        <%
            }
        }
        %>
        };
        ModuleRunner.run(modules);
    }
);